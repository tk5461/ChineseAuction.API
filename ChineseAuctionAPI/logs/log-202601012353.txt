2026-01-01 23:53:17.282 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7157/api/Order/add-gift - application/json 49
2026-01-01 23:53:17.304 +02:00 [INF] Executing endpoint 'ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI)'
2026-01-01 23:53:17.309 +02:00 [INF] Route matched with {action = "AddOrUpdateGift", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddOrUpdateGift(ChineseAuctionAPI.DTO.AddGiftRequest) on controller ChineseAuctionAPI.Controllers.OrderController (ChineseAuctionAPI).
2026-01-01 23:53:17.419 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[OrderId], [o0].[Status], [o0].[dateTime], [o0].[price], [o0].[userId], [g].[IdGiftOrder], [g].[Amount], [g].[IdGift], [g].[OrderId]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[Status], [o].[dateTime], [o].[price], [o].[userId]
    FROM [Orders] AS [o]
    WHERE [o].[userId] = @__userId_0 AND [o].[Status] = 0
) AS [o0]
LEFT JOIN [Gifts_Orders] AS [g] ON [o0].[OrderId] = [g].[OrderId]
ORDER BY [o0].[OrderId]
2026-01-01 23:53:17.452 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[IdGift], [g].[CategoryId], [g].[Description], [g].[IdDonor], [g].[Image], [g].[IsDrawn], [g].[Name], [g].[PackageIdPackage], [g].[Quantity], [g].[price], [g].[userId]
FROM [Gifts] AS [g]
WHERE [g].[IdGift] = @__p_0
2026-01-01 23:53:17.511 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([Status], [dateTime], [price], [userId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3);
2026-01-01 23:53:17.523 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts_Orders] ([Amount], [IdGift], [OrderId])
OUTPUT INSERTED.[IdGiftOrder]
VALUES (@p4, @p5, @p6);
2026-01-01 23:53:17.533 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 23:53:17.534 +02:00 [INF] Executed action ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI) in 223.5758ms
2026-01-01 23:53:17.535 +02:00 [INF] Executed endpoint 'ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI)'
2026-01-01 23:53:17.535 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7157/api/Order/add-gift - 200 null text/plain; charset=utf-8 254.2539ms
2026-01-01 23:53:21.613 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7157/api/Order/add-gift - application/json 49
2026-01-01 23:53:21.616 +02:00 [INF] Executing endpoint 'ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI)'
2026-01-01 23:53:21.618 +02:00 [INF] Route matched with {action = "AddOrUpdateGift", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddOrUpdateGift(ChineseAuctionAPI.DTO.AddGiftRequest) on controller ChineseAuctionAPI.Controllers.OrderController (ChineseAuctionAPI).
2026-01-01 23:53:21.669 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[OrderId], [o0].[Status], [o0].[dateTime], [o0].[price], [o0].[userId], [g].[IdGiftOrder], [g].[Amount], [g].[IdGift], [g].[OrderId]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[Status], [o].[dateTime], [o].[price], [o].[userId]
    FROM [Orders] AS [o]
    WHERE [o].[userId] = @__userId_0 AND [o].[Status] = 0
) AS [o0]
LEFT JOIN [Gifts_Orders] AS [g] ON [o0].[OrderId] = [g].[OrderId]
ORDER BY [o0].[OrderId]
2026-01-01 23:53:21.678 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[IdGift], [g].[CategoryId], [g].[Description], [g].[IdDonor], [g].[Image], [g].[IsDrawn], [g].[Name], [g].[PackageIdPackage], [g].[Quantity], [g].[price], [g].[userId]
FROM [Gifts] AS [g]
WHERE [g].[IdGift] = @__p_0
2026-01-01 23:53:21.690 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Gifts_Orders] SET [Amount] = @p0
OUTPUT 1
WHERE [IdGiftOrder] = @p1;
UPDATE [Orders] SET [price] = @p2
OUTPUT 1
WHERE [OrderId] = @p3;
2026-01-01 23:53:21.697 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 23:53:21.699 +02:00 [INF] Executed action ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI) in 78.9597ms
2026-01-01 23:53:21.699 +02:00 [INF] Executed endpoint 'ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI)'
2026-01-01 23:53:21.700 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7157/api/Order/add-gift - 200 null text/plain; charset=utf-8 87.637ms
2026-01-01 23:53:21.946 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7157/api/Order/add-gift - application/json 49
2026-01-01 23:53:21.948 +02:00 [INF] Executing endpoint 'ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI)'
2026-01-01 23:53:21.949 +02:00 [INF] Route matched with {action = "AddOrUpdateGift", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddOrUpdateGift(ChineseAuctionAPI.DTO.AddGiftRequest) on controller ChineseAuctionAPI.Controllers.OrderController (ChineseAuctionAPI).
2026-01-01 23:53:21.961 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[OrderId], [o0].[Status], [o0].[dateTime], [o0].[price], [o0].[userId], [g].[IdGiftOrder], [g].[Amount], [g].[IdGift], [g].[OrderId]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[Status], [o].[dateTime], [o].[price], [o].[userId]
    FROM [Orders] AS [o]
    WHERE [o].[userId] = @__userId_0 AND [o].[Status] = 0
) AS [o0]
LEFT JOIN [Gifts_Orders] AS [g] ON [o0].[OrderId] = [g].[OrderId]
ORDER BY [o0].[OrderId]
2026-01-01 23:53:21.966 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[IdGift], [g].[CategoryId], [g].[Description], [g].[IdDonor], [g].[Image], [g].[IsDrawn], [g].[Name], [g].[PackageIdPackage], [g].[Quantity], [g].[price], [g].[userId]
FROM [Gifts] AS [g]
WHERE [g].[IdGift] = @__p_0
2026-01-01 23:53:21.971 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Gifts_Orders] SET [Amount] = @p0
OUTPUT 1
WHERE [IdGiftOrder] = @p1;
UPDATE [Orders] SET [price] = @p2
OUTPUT 1
WHERE [OrderId] = @p3;
2026-01-01 23:53:21.973 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 23:53:21.974 +02:00 [INF] Executed action ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI) in 23.216ms
2026-01-01 23:53:21.975 +02:00 [INF] Executed endpoint 'ChineseAuctionAPI.Controllers.OrderController.AddOrUpdateGift (ChineseAuctionAPI)'
2026-01-01 23:53:21.975 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7157/api/Order/add-gift - 200 null text/plain; charset=utf-8 30.0211ms
2026-01-01 23:53:33.342 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7157/api/Order/complete/16 - null 0
2026-01-01 23:53:33.344 +02:00 [INF] Executing endpoint 'ChineseAuctionAPI.Controllers.OrderController.CompleteOrder (ChineseAuctionAPI)'
2026-01-01 23:53:33.360 +02:00 [INF] Route matched with {action = "CompleteOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CompleteOrder(Int32) on controller ChineseAuctionAPI.Controllers.OrderController (ChineseAuctionAPI).
2026-01-01 23:53:33.372 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[Status], [o].[dateTime], [o].[price], [o].[userId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__p_0
2026-01-01 23:53:33.374 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-01 23:53:33.375 +02:00 [INF] Executed action ChineseAuctionAPI.Controllers.OrderController.CompleteOrder (ChineseAuctionAPI) in 11.7068ms
2026-01-01 23:53:33.375 +02:00 [INF] Executed endpoint 'ChineseAuctionAPI.Controllers.OrderController.CompleteOrder (ChineseAuctionAPI)'
2026-01-01 23:53:33.376 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7157/api/Order/complete/16 - 400 null text/plain; charset=utf-8 33.8922ms
2026-01-01 23:53:50.302 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7157/api/Gift/16/draw - null 0
2026-01-01 23:53:50.310 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Manager)
2026-01-01 23:53:50.315 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-01 23:53:50.316 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7157/api/Gift/16/draw - 401 0 null 14.5928ms
