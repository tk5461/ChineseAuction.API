2026-01-01 23:34:25.594 +02:00 [INF] The application has started successfully!
2026-01-01 23:34:25.827 +02:00 [INF] User profile is available. Using 'C:\Users\1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-01 23:34:26.086 +02:00 [INF] Now listening on: https://localhost:7157
2026-01-01 23:34:26.087 +02:00 [INF] Now listening on: http://localhost:5183
2026-01-01 23:34:26.232 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-01 23:34:26.284 +02:00 [INF] Hosting environment: Development
2026-01-01 23:34:26.285 +02:00 [INF] Content root path: C:\Users\1\OneDrive\Desktop\projects\Finish Project !!\ChineseAuctionAPI\ChineseAuctionAPI
2026-01-01 23:34:26.831 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/index.html - null null
2026-01-01 23:34:27.025 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/index.html - 200 null text/html;charset=utf-8 204.0219ms
2026-01-01 23:34:27.038 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - null null
2026-01-01 23:34:27.038 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7157/_vs/browserLink - null null
2026-01-01 23:34:27.046 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_framework/aspnetcore-browser-refresh.js - 200 16519 application/javascript; charset=utf-8 7.656ms
2026-01-01 23:34:27.094 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7157/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.0985ms
2026-01-01 23:34:27.149 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - null null
2026-01-01 23:34:27.176 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7157/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.2701ms
2026-01-01 23:34:41.965 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7157/api/Gift/11/draw - null 0
2026-01-01 23:34:42.065 +02:00 [INF] Executing endpoint 'ChineseAuctionAPI.Controllers.GiftController.DrawWinner (ChineseAuctionAPI)'
2026-01-01 23:34:42.089 +02:00 [INF] Route matched with {action = "DrawWinner", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DrawWinner(Int32) on controller ChineseAuctionAPI.Controllers.GiftController (ChineseAuctionAPI).
2026-01-01 23:34:43.246 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g1].[IdGift], [g1].[CategoryId], [g1].[Description], [g1].[IdDonor], [g1].[Image], [g1].[IsDrawn], [g1].[Name], [g1].[PackageIdPackage], [g1].[Quantity], [g1].[price], [g1].[userId], [s].[IdGiftOrder], [s].[Amount], [s].[IdGift], [s].[OrderId], [s].[OrderId0], [s].[Status], [s].[dateTime], [s].[price], [s].[userId], [s].[userId0], [s].[Address], [s].[City], [s].[Email], [s].[FirstName], [s].[Identity], [s].[LastName], [s].[PhonNumber], [s].[password], [s].[role]
FROM (
    SELECT TOP(1) [g].[IdGift], [g].[CategoryId], [g].[Description], [g].[IdDonor], [g].[Image], [g].[IsDrawn], [g].[Name], [g].[PackageIdPackage], [g].[Quantity], [g].[price], [g].[userId]
    FROM [Gifts] AS [g]
    WHERE [g].[IdGift] = @__giftId_0
) AS [g1]
LEFT JOIN (
    SELECT [g0].[IdGiftOrder], [g0].[Amount], [g0].[IdGift], [g0].[OrderId], [o].[OrderId] AS [OrderId0], [o].[Status], [o].[dateTime], [o].[price], [o].[userId], [u].[userId] AS [userId0], [u].[Address], [u].[City], [u].[Email], [u].[FirstName], [u].[Identity], [u].[LastName], [u].[PhonNumber], [u].[password], [u].[role]
    FROM [Gifts_Orders] AS [g0]
    INNER JOIN [Orders] AS [o] ON [g0].[OrderId] = [o].[OrderId]
    INNER JOIN [Users] AS [u] ON [o].[userId] = [u].[userId]
) AS [s] ON [g1].[IdGift] = [s].[IdGift]
ORDER BY [g1].[IdGift], [s].[IdGiftOrder], [s].[OrderId0]
2026-01-01 23:34:43.359 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-01 23:34:43.365 +02:00 [INF] Executed action ChineseAuctionAPI.Controllers.GiftController.DrawWinner (ChineseAuctionAPI) in 1273.481ms
2026-01-01 23:34:43.367 +02:00 [INF] Executed endpoint 'ChineseAuctionAPI.Controllers.GiftController.DrawWinner (ChineseAuctionAPI)'
2026-01-01 23:34:43.373 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7157/api/Gift/11/draw - 400 null text/plain; charset=utf-8 1408.2946ms
